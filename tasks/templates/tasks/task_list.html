{% extends "base.html" %}


{% block content %}

    <h1>Lista de atividades</h1>

    <form method="get" action="{% url 'task-list' %}">
      <label for="status">Status</label>
        <select name="status" id="status">
          <option value="">Todos</option>
          <option value="P">Pendendte</option>
          <option value="A">Andamento</option>
          <option value="C">Concluido</option>

        </select>
        <button type="submit">Filtrar</button>


    </form>
    
    <table class="table">
  <thead>
    <tr>
      <th scope="col">ID</th>
      <th scope="col">Título</th>
      <th scope="col">Status</th>
      <th scope="col">Descrição</th>
      <th scope="col">Data de criação</th>
      <th scope="col">Data de vencimento</th>
      <th scope="col">Ações</th>
    </tr>
  </thead>
  <tbody>
    {% for task in tasks %}
    <tr>
       <td>{{task.pk}}</td>
      <td>{{task.title}}</td>
      <td>
        {% if task.status == 'P' %}
          <span class="badge bg-warning" title="Pendente" >Pendente</span>
      {% elif task.status == 'A' %}
        <span class="badge bg-info" title="Andamento" >Andamento</span>
      {% elif task.status == 'C' %}
        <span class="badge bg-success" title="Concluido" >Concluído</span>
      {% endif %}
      </td>
      
      <td>{{task.description}}</td>
      <td>{{task.created_at}}</td>
      <td>{{task.due_date}}</td>
      <td>
        <a href="{% url "task-edit" pk=task.pk %}"class="btn btn-primary btn-sm">Editar</a>
      </td>
      <td>
        <a href="{% url "task-delete" pk=task.pk %}"class="btn btn-danger btn-sm">Excluir</a>
      </td>
    </tr>

    {% endfor %}

  </tbody>
</table>

{% endblock content %}